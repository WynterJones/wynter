#!/usr/bin/env bash
# Wynter - AI-powered development framework for Claude Code
# Inspired by Gustav but focused on PRD creation, sprint planning, security, and enhancement

# Ensure _ai directory exists
mkdir -p _ai

# Check if subcommand is provided
if [ $# -eq 0 ]; then
    echo "Wynter - AI Development Framework"
    echo ""
    echo "Usage: /wynter:<command> [options]"
    echo ""
    echo "Commands:"
    echo "  start         Generate Product Requirements Document"
    echo "  plan        Create sprint plan from PRD"
    echo "  security    Run comprehensive security audit"
    echo "  check       Double-check and validate implementation"
    echo "  enhance     Add new features to existing sprint"
    echo "  status      Show current project configuration and files"
    echo "  help        Show detailed help"
    echo ""
    echo "Examples:"
    echo "  /wynter:start \"Build a task management app\""
    echo "  /wynter:plan"
    echo "  /wynter:security --full"
    echo "  /wynter:enhance \"Add dark mode toggle\""
    echo "  /wynter:status"
    echo ""
    echo "Output files are created in: _ai/"
    exit 0
fi

SUBCOMMAND=$1
shift

case $SUBCOMMAND in
    start)
        echo "ğŸš€ Initializing Wynter Product Requirements Document (PRD) Generator..."
        echo "ğŸ“ Output directory: _ai/"
        echo ""
        cat ".claude/commands/wynter/prd.md"
        ;;
    plan)
        echo "ğŸ“Š Initializing Wynter Sprint Planner..."
        echo "ğŸ“ Output directory: _ai/"
        echo ""
        cat ".claude/commands/wynter/planner.md"
        ;;
    security)
        echo "ğŸ”’ Initializing Wynter Security Auditor..."
        echo "ğŸ“ Output directory: _ai/"
        echo ""
        cat ".claude/commands/wynter/security.md"
        ;;
    check)
        echo "âœ… Initializing Wynter Validator & Double-Checker..."
        echo "ğŸ“ Output directory: _ai/"
        echo ""
        cat ".claude/commands/wynter/validator.md"
        ;;
    enhance)
        echo "ğŸ”§ Initializing Wynter Feature Enhancer..."
        echo "ğŸ“ Output directory: _ai/"
        echo ""
        cat ".claude/commands/wynter/enhance.md"
        ;;
    status)
        echo "ğŸ“Š Initializing Wynter Status Reporter..."
        echo "ğŸ“ Checking: _ai/"
        echo ""
        cat ".claude/commands/wynter/status.md"
        ;;
    help)
        cat ".claude/commands/wynter/help.md"
        ;;
    *)
        echo "Unknown command: $SUBCOMMAND"
        echo "Run '/wynter' for available commands"
        exit 1
        ;;
esac